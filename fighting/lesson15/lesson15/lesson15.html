<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>New Page 1</title>
<style>
<!--
table.MsoTableGrid
	{border:1.0pt solid windowtext;
	font-size:10.0pt;
	font-family:"Times New Roman","serif"}
-->
</style>
</head>

<body>

<div align="center">
  <center>
  <table border="0" width="740" height="350" cellspacing="0" cellpadding="0">
    <!-- MSTableType="nolayout" -->
	<tr>
      <td width="740" height="133" background="Site/top.jpg" colspan="3">&nbsp;</td>
    </tr>
    <tr>
      <td width="127" height="356" background="Site/middle1.jpg" valign="top">
        <p align="left">
        <b><font face="Arial" size="1" color="#505866">&nbsp;&nbsp;&nbsp; 
		<a href="http://www.blitz-school.info"><font color="#FFFF99">Курсы</font></a><br>
        &nbsp;&nbsp;&nbsp; </font><font face="Arial" size="1" color="#FFFF99">
		<a href="http://www.blitz-school.info/reg.html"><font color="#FFFF99">Регистрация</font></a><br>
        &nbsp;&nbsp;&nbsp;
		<a href="http://www.blitz-school.info/study_tech.html">
		<font color="#FFFF99">Методика</font></a><br>
        &nbsp;&nbsp;&nbsp; </font>
		<a href="http://www.blitz-school.info/program.html"><font face="Arial" size="1" color="#FFFF99">Оглавление</font></a><font face="Arial" size="1" color="#FFFF99"><br>
        &nbsp;&nbsp;&nbsp; <a href="http://www.blitz-school.info/login.html">
		<font color="#FFFF99">Для учащихся</font></a><br>
        &nbsp;&nbsp;&nbsp; </font></b>
		<img border="0" src="../navdiv.gif" width="80" height="4"><br>
        <b><font size="1" face="Arial" color="#505866">&nbsp;&nbsp;&nbsp;
        <a href="http://www.blitz-school.info/articles.html">
		<font color="#FFFF99">Статьи</font></a><br>
        &nbsp;&nbsp;&nbsp; </font><font size="1" face="Arial" color="#FFFF99">
		<a href="http://www.blitz-school.info/instrum.html">
		<font color="#FFFF99">Инструменты</font></a><br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp; </span>
		<a href="http://www.blitz-school.info/contacts.html">
		<font color="#FFFF99">Контакты</font></a><br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp; </span></font></b>&nbsp;</td>
      <td width="586" height="356" background="Site/bg.gif" valign="top">

<p align="center"><font color="#008000"><b><font size="5"><span lang="ru">Урок </span>
15<span lang="ru">.</span></font></b><span lang="ru"><font size="5"><b>&nbsp; 
Менеджмент игры</b></font><br>
</span>
</font><b></p>
<p align="justify"><font size="2" face="Arial" color="#000080">
<span lang="ru">15<a name="kopv">.1. 
Паладины - стражи порядка в игре</a></span></font></b><span lang="ru"><b><a name="kopv"><font size="2" face="Arial" color="#000080">.</font></a></b><font size="2" face="Arial">
<br>
</font></span><font size="2" face="Arial">
&nbsp;&nbsp;&nbsp;&nbsp; <span lang="ru"><br>
</span>&nbsp; <span lang="ru">&nbsp; </span></font><font size="2" face="Arial">
Законы в <span lang="ru">клубе онлайновой игры</span> абсолютны, не подвергаются 
обсуждению и должны безусловно выполнятся. За их выполнением следят
<span lang="ru">специальные персонажи - </span>паладины, которые являются 
носителями закона. Паладины могут принять решения о наличии того или иного 
состава преступления<span lang="ru"> и применить к нарушителям какой-либо вид 
наказания.<br>
&nbsp;&nbsp;&nbsp; В нашем клубе Меча и магии мы также будем применять термин 
Паладин как должность стража порядка.<br>
&nbsp;&nbsp;&nbsp;&nbsp; Далеко не все игроки ведут честную игру в клубе. Многие 
пытаются найти незаконные способы быстрой прокачки своего персонажа или 
заработка денег нечестным образом. <br>
&nbsp;&nbsp; Вот <font color="#000080"><u>некоторые виды возможных нарушений 
законов</u></font>, которые часто случаются во всевозможных онлайновых играх 
типа Бойцовский Клуб, Арена, </span><span lang="en-us">Carnage </span>и др.:<br>
<br>
<b>1. </b></font><font face="Arial"><b><font size="2">Нарушения связанные с 
заведением нескольких персонажей. (если это запрещено Законами клуба)<br>
</font></b><font size="2"><br>
- Регистрация нескольких персонажей одним человеком. <br>
- Предоставление ложной информации о персонажах, заходивших с одного компьютера.
<br>
- Прокачка на &quot;ботах&quot;, т.е. специально заведенных своих же персонажах. <br>
<br>
<b>2. Нарушения связанные с прокачкой</b> <br>
<br>
- Прокачка на других игроках за кредиты или взаимная прокачка. <br>
- Прокачка младшего уровня старшим. <br>
- Финансовая прокачка. <br>
- Предложение в чате взаимной прокачки, заведомого проигрыша\выигрыша боя за 
кредиты. <br>
<br>
<b>3. Использование ненормативной лексики при общении в чате или форуме игры</b>
<br>
<br>
-Использование ненормативной лексики в чате. <br>
-Использование ненормативной лексики на форуме. <br>
-Использование ненормативной лексики в анкете. <br>
-Использование ненормативной лексики в нике персонажа и т.д.<br>
<br>
<b>4. Нарушения связанные с обманом игроков.</b> <br>
<br>
- Обман игроков (в т.ч. мошенничество при проведении торговых, арендных и 
кредитных сделок, невыполнение условий сделки, хищение чужого имущества ). <br>
- Вымогательство/Шантаж - принуждение к совершения сделки посредством угроз 
распространения сведений, позорящих потерпевшего, либо иных сведений, которые 
могут причинить существенный вред правам или законным интересам потерпевшего.
<br>
<br>
<b>5. Нарушения связанные с некорректной регистрацией</b> <br>
- Неверная дата рождения. <br>
- Неверно указанный пол персонажа (пол персонажа должен соответствовать 
реальному полу игрока).<br>
- Указывание несуществующего или принадлежащего другому человеку адреса 
почтового ящика. <br>
<br>
<br>
<b>6. Использование ошибок программного обеспечения онлайновой игры</b><br>
<br>
- Взлом/похищение персонажей. <br>
- Распространение ссылок на веб-сайты, содержание которых вызывает сбои в работе 
компьютера, а равно на веб-сайты, содержание которых направлено на незаконное 
получение паролей доступа к персонажам БК&nbsp; и т.д.<br>
<br>
<b>7. Прочие нарушения.</b> <br>
<br>
- Оскорбительные высказывания в адрес Администрации, игрока/игроков, Паладинов, 
унижение их чести и достоинства, выраженное в неприличной форме. <br>
- Пропаганда наркотиков и реклама ресурсов, содержащих данную рекламу. <br>
Прямая и косвенная реклама собственных сайтов. <br>
- Реклама порно-сайтов, распространение ссылок на веб-сайты, содержание которых 
не относится к онлайн-игре. <br>
- Пропаганда расизма, националистические высказывания. <br>
- Дискриминация любого рода (по расовой, религиозной, половой принадлежности etc)
<br>
- Попрошайничество. <br>
- Угрозы насилием и/или физической расправой в реальной жизни. <br>
<br>
Паладины, как блюстители закона клуба, могут применять следующие наказания за 
деяния, описанные выше: <br>
<br>
1.Заклятие молчания.&nbsp;
<img border="0" src="15_1/shut_up.gif" width="24" height="15"><br>
2.Присваивание склонности Хаос (разного рода ограничения во время игры)&nbsp;
<img border="0" src="15_1/chaos.gif" width="12" height="15"><br>
3.Блокировка персонажа.
<img border="0" src="15_1/block.jpg" width="29" height="17"><br>
</font></font><font size="2" face="Arial">
<span lang="ru">
<br>
&nbsp;</span>&nbsp; <span lang="ru"> 
<br>
</span></font><a name="kopv0"><b>
<span lang="ru">
<font face="Arial" size="2" color="#000080">15</font></span></b></a><font size="2" face="Arial"><b><span lang="ru"><font face="Arial" color="#000080"><a name="kopv0"><font size="2">.2. 
</font></a></font></span><font size="2" face="Arial" color="#000080">
<span lang="ru">Н<a name="kopv0">аложение молчания в чате</a><a name="kopv1">.</a></span></font></b><span lang="ru"> <br>
<br>
&nbsp;&nbsp;&nbsp;Итак, одним из самых простых наказаний, является наказание 
наложением молчания на игрока. Давайте добавим такую возможность паладину. 
Возьмем, к примеру, игрока&nbsp; с ником </span><span lang="en-us">Defender
</span>и сделаем из него паладина. <br>
&nbsp;&nbsp;&nbsp; Для этого введем дополнительное поле <font color="#000080">
Char_Side</font> в таблицу <b><span lang="en-us">users</span></b>, которое будет<span lang="en-us">
</span>описывать &quot;склонность персонажа&quot;. Это поле будет принимать у нас 
несколько значений:<br>
&nbsp;&nbsp;&nbsp; 0 - обычный игрок (по умолчанию)<br>
&nbsp;&nbsp;&nbsp; 1 - паладин<br>
&nbsp;&nbsp;&nbsp; 2 - игрок с темной склонностью.<br>
<br>
&nbsp; Давайте поменяем склонность игроку <span lang="en-us">Defender , </span>
т.е. установим значение поля <font color="#000080">Char_Side</font>&nbsp; в 
единицу. После чего немного поменяем наш файл <span lang="en-us">
<font color="#000080">char.phtml</font> </span>для того чтоб отображать 
специальный значок паладина -
<img border="0" src="15_2/pal.gif" width="12" height="15">. Этим значком он 
сразу будет выделяться среди других обычных игроков клуба.<br>
&nbsp;&nbsp; Теперь в <font color="#000080"><span lang="en-us">char.phtml</span>
</font>мы еще будем считывать поле <font color="#000080">Char_Side</font>&nbsp; 
, чтоб для паладина отобразить его значок:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table1">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		$aChar_Side = $aRow[&quot;Char_Side&quot;];</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">Также напишем простую функцию </font>
<font face="Courier" size="2" color="#000080">
		GetCharSide</font><font size="2" face="Arial">:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table2">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#0000FF">function</font> <font color="#000080">GetCharSide</font>(){
		<br>
		global $aChar_Side,$aChar_Chaos;<br>
		<br>
		<font color="#0000FF">if</font> ( $aChar_Side == 1 )
		<font color="#0000FF">print</font> ('&lt;img src=img/pal.gif alt=&quot;Игрок 
		принадлежит к светлому братству&quot;&gt; ');<br>
		<font color="#0000FF">if</font> ( $aChar_Side == 2 )
		<font color="#0000FF">print</font> ('&lt;img src=img/dark.gif alt=&quot;Игрок 
		принадлежит к темному братству&quot;&gt; ');<br>
		<font color="#0000FF">if</font> ( $aChar_Chaos == 1 )
		<font color="#0000FF">print</font> ('&lt;img src=img/chaos.gif alt=&quot;Игрок 
		находится в хаосе&quot;&gt; ');<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">Теперь наш персонаж
<span lang="en-us">Defender </span>обзавелся значком паладина:<br>
<br>
<img border="0" src="pal.jpg" width="366" height="322"><br>
<br>
&nbsp;&nbsp; Безусловно, в реальной онлайновой игре, никто никогда не назначит 
игрока 1-го уровня стражем порядка. Такой игрок еще сам не знает всех правил 
клуба и тем более не может следить за их выполнением! Но у нас все возможно, 
поэтому давайте сделаем для паладина специальный элемент страницы, где он сможет 
использовать свои способности по наведению порядка - наложению молчанки, хаоса 
или блока.<br>
&nbsp;&nbsp; Но, для начала, снова немного расширим нашу табличку <b>
<span lang="en-us">users</span></b>. На этот раз добавим поля, которые отвечают 
за три состояния (молчанка, хаос или блок)</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table3">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#008080">/*хаос, блок, молчанка*/</font><br>
		Char_Chaos INT DEFAULT 0,<br>
		Char_Block INT DEFAULT 0,<br>
		Char_ShutUp INT DEFAULT 0,</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; Если игрок является 
паладином, у него в странице <span lang="en-us">char.phtml </span>появляется 
специальный <span lang="en-us">iframe </span>для вызова паладинских функций 
наведения порядка:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table4">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>&lt;?php</b> if ($aChar_Side == 1) { <b>?&gt;</b><br>
		&lt;br&gt;&lt;br&gt;<br>
		&lt;iframe src=&quot;pal.phtml?NickName=<b>&lt;?php</b> <font color="#0000FF">echo</font> 
		$aNickName <b>?&gt;</b>&quot; width=450 height=80 frameborder=1 vspace=0 hspace=0 
		marginwidth=0 marginheight=0 scrolling=yes&gt;&lt;/iframe&gt;<br>
		<b>&lt;?php</b> } <b>?&gt;</b></font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp; В этом теге </font>
<font face="Courier" size="2">
		iframe</font><font size="2" face="Arial">, грузится специальный файл </font>
<font face="Courier" size="2">
		pal.phtml</font><font size="2" face="Arial">, в котором нам предстоит 
описать алгоритмы наложения и снятия молчанок/хаоса/блока.<br>
<br>
&nbsp;&nbsp; По умолчанию, этот файл отображает поле ввода ника персонажа, к 
которому впоследствии планируется применить меры пресечения:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table5">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>&lt;?php</b><br>
		<font color="#0000FF">if</font> ($aPlayerLogin == &quot;&quot;){<br>
		?&gt;<br>
		Выберите игрока для управления: &lt;br&gt;<br>
		&lt;input type=text id=user_login&gt; &amp;nbsp; &lt;input type=button value = 
		'Подойти' onClick='<font color="#000080">ControlPlayer</font>()'&gt;<br>
		<b>&lt;?php</b><br>
		} <font color="#0000FF">else</font> {......<br>
		............</font></td>
	</tr>
</table>
<p><font face="Arial" size="2">&nbsp;&nbsp; Пока не указан логин игрока, мы 
отображаем поле ввода:<br>
<br>
<img border="0" src="control1.jpg" width="461" height="156"></font></p>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; Давайте применим 
меры дисциплинарного взыскания к персонажу <span lang="en-us">Stranger</span>, 
который имеет нехорошее свойство - использовать нецензурную лексику при общении 
в чате:<br>
<br>
<img border="0" src="stranger1.jpg" width="440" height="598"><br>
<br>
&nbsp;&nbsp;&nbsp; Наш Паладин <span lang="en-us">Defender</span>,<span lang="en-us">
</span>увидев такое вопиющее нарушение закона тут же вводит ник нарушающего 
порядок персонажа себе в управляющем фрейме и после этого у него появляется 
наложить на игрока молчанку:<br>
<br>
<img border="0" src="shut1.jpg" width="285" height="87"><br>
<br>
&nbsp; При вводе имени игрока в поле управления, паладин активирует функцию:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table6">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>function</b> ControlPlayer(){<br>
		pl_login = document.getElementById('<font color="#000080">user_login</font>').value;<br>
		location.href=&quot;pal.phtml?playerlogin=&quot;+pl_login;<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; Которая передает ник 
персонажа в скрипт <span lang="en-us">pal.phtml.</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table7">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>&lt;?php<br>
		</b>$aPlayerLogin = &quot;&quot;;<br>
		<font color="#0000FF">if</font> (!<font color="#0000FF">empty</font>($<font color="#0000FF">_GET</font>['playerlogin'])){<br>
		$aPlayerLogin = $<font color="#0000FF">_GET</font>['playerlogin'];<br>
		}<br>
		<b>?&gt;</b></font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="en-us">&nbsp;&nbsp;
</span>Затем осуществляется проверка поля </font><font face="Courier" size="2">
		<font color="#000080">Char_ShutUp</font> </font>
<font size="2" face="Arial">игрока<span lang="en-us"> Stranger:</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table8">
	<tr>
		<td bgcolor="#FFFFCC"><span lang="en-us"><font face="Courier" size="2">
		...</font></span><font face="Courier" size="2"><br>
		$aChar_ShutUp = $aRow[&quot;Char_ShutUp&quot;];<br>
		<span lang="en-us">...</span><br>
		<font color="#0000FF">print</font> ( &quot;&lt;table border=1&gt;&lt;tr&gt;&lt;td&gt;Персонаж: 
		&lt;b&gt;$aPlayerLogin &lt;/b&gt;&lt;/td&gt;&quot;);<br>
		<font color="#0000FF">if</font>($aChar_ShutUp == 1){<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(<font color="#000080">1</font>)'&gt;&lt;img 
		src=img/shut_up2.gif border=0 alt='Снять молчанку'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}<font color="#0000FF">else</font>{<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(<font color="#000080">2</font>)'&gt;&lt;img 
		src=img/shut_up.gif border=0 alt='Наложить молчанку'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="en-us">&nbsp;&nbsp;
</span>Нажав на<span lang="en-us"> </span>значок <span lang="en-us">
<img border="0" src="15_1/shut_up.gif" width="24" height="15"></span> паладин 
активирует <span lang="en-us"><i>JavaScript</i> </span>функцию<span lang="en-us">
</span></font><font color="#000080" face="Courier" size="2">PalAction</font><font size="2" face="Arial">.<span lang="en-us">
</span>Аргумент 1 этой функции означает <span lang="en-us">-</span> снятие 
молчанки<span lang="en-us">,</span> а аргумент 2<span lang="en-us"> </span>- 
наложение молчанки.</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table9">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>function</b> <font color="#000080">PalAction</font>( action ){<br>
		if (confirm(&quot;Вы уверены?&quot;)){<br>
		location.href=&quot;pal.phtml?act=&quot;+action+&quot;&amp;playerlogin=<b>&lt;?php </b>
		<font color="#0000FF">echo</font> $aPlayerLogin; <b>?&gt;</b>&quot;;<br>
		}<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; Эта функция передает 
скрипту <span lang="en-us">pal.html </span>параметр <font color="#000080">act</font><span lang="en-us">,
</span>который определяет действие производимое паладином<span lang="en-us">.</span> 
На <span lang="en-us">PHP </span>это выглядит следующим образом:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table10">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#0000FF">if</font> (!<font color="#0000FF">empty</font>($<font color="#0000FF">_GET</font>['act'])){<br>
		$aAction = $<font color="#0000FF">_GET</font>['act'];<br>
		<br>
		<font color="#0000FF">switch</font> ($aAction) {<br>
		<font color="#0000FF">case</font> <b>1</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_ShutUp=0 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		$query = <font color="#008000">&quot;INSERT INTO chat (CH_MSG,USER_ID,USER_ID_TO,CH_ROOM,IS_PRIVATE)</font> 
		values('С Вас снято заклятье молчания',1,'$aUserID','0',1)&quot;;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		<font color="#0000FF">break</font>;<br>
		<font color="#0000FF"><br>
		case</font> <b>2</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_ShutUp=1 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		$query = <font color="#008000">&quot;INSERT INTO chat (CH_MSG,USER_ID,USER_ID_TO,CH_ROOM,IS_PRIVATE)</font> 
		values('На Вас наложено заклятье молчания',1,'$aUserID','0',1)&quot;;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		<font color="#0000FF">break</font>;</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; В результате в 
браузере видим следующую картину:<span lang="en-us"><br>
<br>
<img border="0" src="stranger2.jpg" width="440" height="598"><br>
<br>
</span><font color="#000080"><span lang="ru">
<b><a name="kopv2">1</a></b></span><a name="kopv2"><span lang="ru"><b>5</b></span></a></font><b><span lang="ru"><font face="Arial" color="#000080"><a name="kopv2"><font size="2">.3. 
</font></a></font></span></b><a name="kopv2"><span lang="ru">
<font color="#000080"><b>Наложение хаоса (ограничение возможностей)</b></font></span></a><span lang="ru"><b><font size="2" face="Arial" color="#000080"><a name="kopv3">.</a></font></b> <br>
<br>
&nbsp;&nbsp; Если нарушитель порядка уже неоднократно привлекался к молчанкам, 
то паладин вполне резонно может нажать на кнопку
<img border="0" src="15_1/chaos.gif" width="12" height="15"> в своем меню 
управления. Наложение хаоса предусматривает некоторые ограничения на свободу 
перемещений наказанного персонажа. Вы можете сами придумать какие это будут 
ограничения<br>
&nbsp;&nbsp; К примеру, персонаж в хаосе не может зайти в комиссионный магазин и 
торговые ряды. Это очень существенное наказание! Ведь такой игрок должен 
покупать вещи только в государственном магазине (кузнице) по госценам и никаких 
скидок для него не предусмотрено. Более того, он не может продать свои старые, 
ненужные вещи.<br>
&nbsp;&nbsp;&nbsp; Итак, выбрав столь суровое наказание, паладин нажимает на 
кнопку <img border="0" src="15_1/chaos.gif" width="12" height="15">&nbsp; и 
выполняет ту же  
</span><span lang="en-us"><i>JavaScript</i> </span>функцию<span lang="en-us">
</span></font><font color="#000080" face="Courier" size="2">PalAction</font><font size="2" face="Arial"><span lang="ru">. 
Но на этот раз в качестве аргумента могут быть переданы значения: 4 - для 
наложения хаоса и 3 - для снятия хаоса.  
</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table11">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		...<br>
		$aChar_Chaos= $aRow[&quot;Char_Chaos&quot;];<br>
		...<br>
		<font color="#0000FF">print</font> ( &quot;&lt;table border=1&gt;&lt;tr&gt;&lt;td&gt;Персонаж: 
		&lt;b&gt;$aPlayerLogin &lt;/b&gt;&lt;/td&gt;&quot;);<br>
		<font color="#0000FF">if</font>($aChar_Chaos == 1){<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(3)'&gt;&lt;img 
		src=img/chaos2.gif border=0 alt='Снять хаос'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}<font color="#0000FF">else</font>{<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(4)'&gt;&lt;img 
		src=img/chaos.gif border=0 alt='Наложить хаос'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="ru">&nbsp;&nbsp;&nbsp; 
Выполняясь, функция  
</span></font><font color="#000080" face="Courier" size="2">PalAction</font><font size="2" face="Arial"><span lang="ru">, 
вызывает выполнение следующего фрагмента  
</span><span lang="en-us">PHP </span>к<span lang="ru">ода:</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table12">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#0000FF">case</font> <b>3</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_Chaos=0 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = mysql_query($query) or die(&quot;Query failed : &quot; . mysql_error());<br>
		$query = <font color="#008000">&quot;INSERT INTO chat (CH_MSG,USER_ID,USER_ID_TO,CH_ROOM,IS_PRIVATE)</font> 
		values('С Вас снят хаос',1,'$aUserID','0',1)&quot;;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		<font color="#0000FF">break</font>;<br>
		<br>
		<font color="#0000FF">case</font> <b>4</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_Chaos=1 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = mysql_query($query) or die(&quot;Query failed : &quot; . mysql_error());<br>
		$query = <font color="#008000">&quot;INSERT INTO chat (CH_MSG,USER_ID,USER_ID_TO,CH_ROOM,IS_PRIVATE)</font> 
		values('На Вас наложен хаос',1,'$aUserID','0',1)&quot;;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		<font color="#0000FF">break</font>;</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="ru">&nbsp;&nbsp; В 
результате, в окне браузера видим следующую картину:<br>
<br>
<img border="0" src="chaos1.jpg" width="440" height="598"><br>
<br>
&nbsp;&nbsp;&nbsp; В качестве домашнего упражнения, сделайте для помещенного в 
хаос игрока ограничение на вход в &quot;Торговые ряды&quot; и&nbsp; &quot;Комиссионный 
магазин&quot;.<br>
</span><br>
<font color="#000080"><span lang="ru"><b><a name="kopv4">15</a></b></span></font><b><span lang="ru"><font face="Arial" color="#000080"><a name="kopv4"><font size="2">.4.</font></a></font></span></b><font color="#000080"><b>
Наложение блока на игрока</b></font><span lang="ru"><br>
<br>
&nbsp;&nbsp;&nbsp; Если паладин находит, что игрок допустил правонарушения не 
совместимые с его дальнейшим пребыванием в клубе, он может наложить на персонаж 
заклятие смерти (блокировки).<br>
&nbsp;&nbsp;&nbsp;&nbsp; Третья кнопка в панели управления паладина как раз 
отвечает за это действие:<br>
<br>
<img border="0" src="block1.jpg" width="470" height="169"><br>
<br>
&nbsp;&nbsp; Итак, желая заблокировать персонажа, паладин нажимает на кнопку
<img border="0" src="15_1/block.jpg" width="29" height="17">и выполняет знакомую 
нам </span><span lang="en-us"><i>JavaScript</i> </span>функцию<span lang="en-us">
</span></font><font color="#000080" face="Courier" size="2">PalAction</font><font size="2" face="Arial"><span lang="ru">. 
Но на этот раз в качестве аргумента могут быть переданы значения: 5 - для 
наложения блокировки и 6 - для снятия блокировки.  
</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table13">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		...<br>
		$aChar_Block = $aRow[&quot;Char_Block&quot;];<br>
		...<br>
		<font color="#0000FF">if</font>($aChar_Block == 1){<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(<b>5</b>)'&gt;&lt;img 
		src=img/block2.jpg border=0 alt='Снять блок'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}<font color="#0000FF">else</font>{<br>
		<font color="#0000FF">print</font>(&quot;&lt;td&gt; &lt;a href='#' onClick='<font color="#000080">PalAction</font>(<b>6</b>)'&gt;&lt;img 
		src=img/block.jpg border=0 alt='Наложить блок'&gt;&lt;/a&gt;&lt;/td&gt;&quot;);<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font face="Arial" size="2">&nbsp;<span lang="ru"> В процессе 
своего выполнения, функция  
</span></font><font color="#000080" face="Courier" size="2">PalAction</font><font size="2" face="Arial"><span lang="ru">, 
вызывает выполнение следующего фрагмента  
</span><span lang="en-us">PHP </span>к<span lang="ru">ода:</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table14">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#0000FF">case</font> <b>5</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_Block=0 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>());<br>
		<font color="#0000FF">break</font>;<br>
		<br>
		<font color="#0000FF">case</font> <b>6</b>:<br>
		$query = <font color="#008000">&quot;update users set Char_Block=1 WHERE 
		USER_ID='$aUserID'&quot;</font>;<br>
		$result = <font color="#0000FF">mysql_query</font>($query) or
		<font color="#0000FF">die</font>(&quot;Query failed : &quot; .
		<font color="#0000FF">mysql_error</font>()); <br>
		<font color="#0000FF">break</font>;</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="ru">&nbsp;&nbsp;&nbsp; 
Преждевременное снятие наказания с провинившегося игрока - тоже отличный <u>
способ заработать</u> для администрации онлайн-игры. К примеру, в Бойцовском 
клубе создан специальный коммерческий отдел, который занимается следующими 
платными услугами:<br>
<br>
-Смена&nbsp; пароля; <br>
-Смена пароля на банковский счёт; <br>
-Смена даты рождения; <br>
-Смена e-mail; <br>
-Смена пола персонажа; <br>
-Смена никнейма персонажа; <br>
-Снятие хаоса<br>
-Снятие блокировки&nbsp; и т.д.<br>
</span><br>
<br>
<a name="kopv6"><font color="#000080"><span lang="ru"><b>15</b></span></font></a><b><span lang="ru"><font face="Arial" color="#000080"><a name="kopv6"><font size="2">.5. 
</font></a></font></span></b><span lang="ru"><b>
<font size="2" face="Arial" color="#000080"><a name="kopv6">На закуску</a><a name="kopv7">.</a></font></b>
<br>
<br>
&nbsp;&nbsp;&nbsp; Итак, мы подошли к завершению нашего курса. Надеюсь он был 
для Вас интересным и познавательным. Конечно в рамках такого небольшого, сжатого 
курса мы не могли рассмотреть все аспекты создания онлайновых игр. Однако, Вы 
теперь знаете основные принципы и вооружившись знаниями, которые вы почерпнули 
из наших занятий и основываясь на Ваших творческих идеях, создадите Вашу новую 
онлайн игру, которая будет очень интересна для игроков и принесет Вам 
известность и успех!<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; Давайте в качестве завершающего аккорда наших с Вами занятий 
попробуем создать тестовую игру <u>стратегического</u> характера. Для нее мы не 
будем создавать таблицы в СУБД </span><span lang="en-us">MySQL </span>и<span lang="ru"> 
писать </span><span lang="en-us">PHP </span>к<span lang="ru">од. Мы просто 
воспользуемся браузером и реализуем бой двух противоборствующих друг-другу 
группировок солдат.<br>
&nbsp;&nbsp;&nbsp;&nbsp; Итак, кто же будет участвовать в поединке?<br>
&nbsp;&nbsp;&nbsp;&nbsp; Вот они - представители военных сил:</span></font></p>
<table border="0" width="586" id="table15">
	<tr>
		<td width="146"><font size="2" face="Arial">
		<img border="0" src="BONUS/warunits/stroybat.jpg" width="73" height="100">
		<br>
		Стройбатовец</font></td>
		<td width="146"><font size="2" face="Arial">
		<img border="0" src="BONUS/warunits/rifleman.jpg" width="67" height="100">
		<br>
		Солдат с винтовкой</font></td>
		<td width="146"><font size="2" face="Arial">
		<img border="0" src="BONUS/warunits/automan.jpg" width="67" height="100">
		<br>
		Автоматчик</font></td>
		<td width="146"><font size="2" face="Arial">
		<img border="0" src="BONUS/warunits/bazooka.jpg" width="67" height="100"><br>
		Солдат с базукой</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="ru">&nbsp;&nbsp; 
Принцип боя такой же, какой мы создали в 8 уроке нашего курса, хотя с небольшими 
отличиями. Отличия состоят, во-первых, в том что нам приходится контролировать 4 
юнита вместо одного и атаковать столько же у соперника. Во-вторых защищать мы 
можем только один тип юнитов и атаковать также одним типом.<br>
&nbsp;&nbsp;&nbsp; В окне браузера это выглядит так:<br>
<br>
<img border="0" src="war1.jpg" width="538" height="598"><br>
<br>
&nbsp; Мы, как обычно для тестовых игр, играем одновременно за две стороны. 
Выбираем какой тип<br>
юнитов защитить, какой выбрать для нападения (это может быть как этот же тип так 
другой) и назначить - на кого напасть. <br>
&nbsp; Так на рисунке выше мы видим, что &quot;Солдаты с Винтовками&quot; персонажа <b>
Боец 1</b> в количестве 5 человек защищены (к примеру окопались) и в то же время 
участвуют в атакующих действиях на автоматчиков персонажа <b>Боец 2</b>. <b>Боец 
2, </b>к примеру, не знает что атака ведется на подшефных ему автоматчиков и 
защищает своих &quot;винтовочников&quot; и ими же атакует такой же род войск у <b>Бойца 1</b>.<br>
&nbsp; Надо заметить, что окопавшийся отряд получает только треть повреждений, 
поэтому этот раунд принесет перевес Бойцу 1. Он убьет больше бойцов противника и 
понесет меньшие потери.<br>
&nbsp;&nbsp; Рассмотрим теперь характеристики наших отрядов:</span></font></p>
<table border="0" width="100%" id="table16">
	<tr>
		<td bgcolor="#FFFFCC"><font size="2" face="Arial">Отряд</font></td>
		<td bgcolor="#FFFFCC"><font size="2" face="Arial">Жизнь</font></td>
		<td bgcolor="#FFFFCC"><font size="2" face="Arial">Урон</font></td>
	</tr>
	<tr>
		<td><font size="2" face="Arial">Стройбатчики</font></td>
		<td><font size="2" face="Arial">2</font></td>
		<td><font size="2" face="Arial">3</font></td>
	</tr>
	<tr>
		<td><font size="2" face="Arial">Винтовочники</font></td>
		<td><font size="2" face="Arial">3</font></td>
		<td><font size="2" face="Arial">5</font></td>
	</tr>
	<tr>
		<td><font size="2" face="Arial">Автоматчики</font></td>
		<td><font size="2" face="Arial">5</font></td>
		<td><font size="2" face="Arial">8</font></td>
	</tr>
	<tr>
		<td><font size="2" face="Arial">Солдаты с базукой</font></td>
		<td><font size="2" face="Arial">5</font></td>
		<td><font size="2" face="Arial">12</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="ru">&nbsp; Мы видим, 
что каждый тип войска имеет очки жизни и наносимый урон. Наиболее слабы 
стройбатчики - у них очков жизни 2, а наносят они урон - 3 (это для каждого 
отдельного юнита,&nbsp; общий урон нужно умножать на количество бойцов в отряде)<br>
<br>
&nbsp; Давайте опишем характеристики бойцов, их тип и количество на </span>
<span lang="en-us">JavaScript:</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table17">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<font color="#008000">// Доступные войска <br>
		</font>var sm = new Array(&quot;stroybat&quot;,2,3, <br>
		&quot;rifleman&quot;,3,5, <br>
		&quot;automan&quot;,5,8, <br>
		&quot;bazooka&quot;,5,12, <br>
		&quot;medic&quot;,3,1);</font><p><font face="Courier" size="2">
		<br>
		// Боец 1 1-тип войска, 2 - кол-во<br>
		var army1 = new Array(1,10,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>2,5,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>3,4,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>4,1);</font></p>
		<p><font face="Courier" size="2">
		<br>
		// Боец 2 1-тип войска, 2 - кол-во<br>
		var army2 = new Array(2,4,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>3,5,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>1,12,<br>
		<span lang="en-us">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		</span>4,1);</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial"><span lang="en-us"><br>
</span>Теперь когда эти параметры инициализированы, мы может отобразить наши 
войска:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table18">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>function</b> ShowArmies(){<br>
		i = 0;<br>
		a_cnt = 1;<br>
		while( i &lt; army1.length ) {<br>
		var pos = army1[i++];<br>
		var s = sm[pos*3-3];<br>
		var ahp = sm[pos*3-2];<br>
		var admg = sm[pos*3-1];<br>
		document.getElementById('i1'+a_cnt).src = 'warunits/'+s+'.jpg';<br>
		document.getElementById('i1'+a_cnt).alt = s+' Жизнь: '+ahp+' Урон: '+admg;<br>
		kvo = army1[i++];<br>
		if (kvo==0){<br>
		document.getElementById('A1'+a_cnt).disabled = true;<br>
		document.getElementById('D1'+a_cnt).disabled = true;<br>
		document.getElementById('W2'+a_cnt).disabled = true;<br>
		}<br>
		document.getElementById('kvo1'+a_cnt).innerHTML = kvo;<br>
		a_cnt++;<br>
		}<br>
		i = 0;<br>
		a_cnt = 1;<br>
		while( i &lt; army2.length ) {<br>
		var pos = army2[i++];<br>
		var s = sm[pos*3-3];<br>
		var ahp = sm[pos*3-2];<br>
		var admg = sm[pos*3-1];<br>
		document.getElementById('i2'+a_cnt).src = 'warunits/'+s+'.jpg';<br>
		document.getElementById('i2'+a_cnt).alt = s+' Жизнь: '+ahp+' Урон: '+admg;<br>
		kvo = army2[i++];<br>
		if (kvo==0){<br>
		document.getElementById('A2'+a_cnt).disabled = true;<br>
		document.getElementById('D2'+a_cnt).disabled = true;<br>
		document.getElementById('W1'+a_cnt).disabled = true;<br>
		}<br>
		document.getElementById('kvo2'+a_cnt).innerHTML = kvo;<br>
		a_cnt++;<br>
		}<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp; Здесь мы просто движемся 
по созданным ранее массивам и выбираем нужные значения.<span lang="en-us"><br>
</span>Картинки войск находятся <a href="BONUS/warunits">здесь</a>.<span lang="en-us"><br>
</span>&nbsp; Радио-кнопки для режимов &quot;Защита&quot;<span lang="en-us"> </span>
&quot;Атака&quot;<span lang="en-us"> </span>и&nbsp; &quot;Куда&quot;<span lang="en-us">,</span> как 
для первого бойца, так и для второго объединены в группы <span lang="en-us">A1, 
D1, W1 </span>и&nbsp; <span lang="en-us">A</span>2<span lang="en-us">, D</span>2<span lang="en-us">, 
W2 </span>соответственно.<span lang="en-us"> </span>При выборе этих радио-кнопок 
срабатывают соответствующие функции: setdefend<i>х</i> setattack<i>х</i><span lang="en-us">
</span>и <span lang="en-us">setwhere</span><i>х,</i> где<span lang="en-us">
</span><i>х</i> -<span lang="en-us"> </span>номер бойца 1 или 2. Эти функции 
устанавливают значения переменных:</font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table19">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		var s_attack1 = 0;<br>
		var s_attack2 = 0;<br>
		var s_defend1 = 0;<br>
		var s_defend2 = 0;<br>
		var s_where1 = 0;<br>
		var s_where2 = 0;</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">&nbsp;&nbsp; Установка этих 
переменных позволяет после выполнения хода (нажатия кнопки &quot;Вперед&quot;)<span lang="en-us">
</span>подсчитать все потери для обеих сторон, исходя из урона, очков жизни и 
защиты юнитов.<span lang="en-us"><br>
</span>Подсчетом урона занимается функция <font color="#000080">SetDamage</font>()<span lang="en-us">.</span></font></p>
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table20">
	<tr>
		<td bgcolor="#FFFFCC"><font face="Courier" size="2">
		<b>function</b> SetDamage(){<br>
		<br>
		// Характеристики нападающих<br>
		var unit1 = army1[ (s_attack1*2-1)-1 ];<br>
		var unit2 = army2[ (s_attack2*2-1)-1 ];<br>
		var kolvo1 = army1[ (s_attack1*2-1) ];<br>
		var kolvo2 = army2[ (s_attack2*2-1) ];<br>
		// характеристики по ком наносится удар?<br>
		var a_unit1 = army1[ (s_where2*2-1)-1 ];<br>
		var a_unit2 = army2[ (s_where1*2-1)-1 ];<br>
		var a_kolvo1 = army1[ (s_where2*2-1) ];<br>
		var a_kolvo2 = army2[ (s_where1*2-1) ];<br>
		<br>
		// атака второго попала в защиту первого?<br>
		var dam_koef1 = (s_where2==s_defend1) ? 0.3 : 1<br>
		// атака первого попала в защиту второго?<br>
		var dam_koef2 = (s_where1==s_defend2) ? 0.3 : 1<br>
		<br>
		var unit_name1 = sm[ unit1*3-3 ];<br>
		var unit_name2 = sm[ unit2*3-3 ];<br>
		var a_unit_name1 = sm[ a_unit1*3-3 ];<br>
		var a_unit_name2 = sm[ a_unit2*3-3 ];<br>
		var dam1 = sm[unit1*3-1];<br>
		var dam2 = sm[unit2*3-1];<br>
		var hp1 = sm[a_unit1*3-2];<br>
		var hp2 = sm[a_unit2*3-2];<br>
		<br>
		var realdam1 = Math.round(getRandom(dam1-1,dam1+1)*dam_koef2);<br>
		var realdam2 = Math.round(getRandom(dam2-1,dam2+1)*dam_koef1);<br>
		<br>
		if ((hp1*a_kolvo1 - realdam2*kolvo2) &gt;=0){<br>
		<font color="#000080">alive1</font> = Math.round((hp1*a_kolvo1 - 
		realdam2*kolvo2)/hp1);<br>
		} else alive1 = 0;<br>
		<br>
		if((hp2*a_kolvo2 - realdam1*kolvo1) &gt;= 0){<br>
		<font color="#000080">alive2</font> = Math.round((hp2*a_kolvo2 - 
		realdam1*kolvo1)/hp2);<br>
		} else alive2 = 0;<br>
		<br>
		// прописываем оставшихся после хода:<br>
		army1[ (s_where2*2-1) ] = alive1; <br>
		army2[ (s_where1*2-1) ] = alive2; <br>
		ShowArmies();<br>
		<br>
		var hsh = new Date();<br>
		<br>
		mess1 = hsh.getHours()+&quot;:&quot;+hsh.getMinutes()+&quot;:&quot;+hsh.getSeconds()+' &lt;b&gt;'+unit_name1+'&lt;/b&gt; 
		(Боец1) нанес удар по &lt;b&gt;'+a_unit_name2+'&lt;/b&gt; (Боец2), урон: 
		'+(realdam1*kolvo1)+' hp, потери составили: '+(a_kolvo2-alive2)+' ед. &lt;br&gt;';<br>
		mess2 = hsh.getHours()+&quot;:&quot;+hsh.getMinutes()+&quot;:&quot;+hsh.getSeconds()+' &lt;b&gt;'+unit_name2+'&lt;/b&gt; 
		(Боец2) нанес удар по &lt;b&gt;'+a_unit_name1+'&lt;/b&gt; (Боец1), урон: 
		'+(realdam2*kolvo2)+' hp, потери составили: '+(a_kolvo1-alive1)+' ед. &lt;br&gt;';<br>
		mess.innerHTML = mess1+mess2+mess.innerHTML;<br>
		<br>
		TestAlive();<br>
		s_attack1 = 0;<br>
		s_attack2 = 0;<br>
		s_defend1 = 0;<br>
		s_defend2 = 0;<br>
		s_where1 = 0;<br>
		s_where2 = 0;<br>
		ClearRadio();<br>
		}</font></td>
	</tr>
</table>
<p align="justify"><font size="2" face="Arial">Кроме подсчета урона и оставшихся 
в живых солдат<span lang="en-us"> </span>(</font><font face="Courier" size="2"><font color="#000080">alive1</font> 
и <font color="#000080">alive2</font> </font><font size="2" face="Arial">)<span lang="en-us">,</span> 
эта функция ведет лог боя - кто куда нанес удар и результат атаки/защиты.<span lang="en-us"><br>
</span>Вызываемые из нее функции </font>
<font face="Courier" size="2" color="#000080">
		TestAlive</font><font size="2" face="Arial"><span lang="en-us"> </span>и </font>
<font face="Courier" size="2">
		<font color="#000080">ClearRadio</font> </font>
<font size="2" face="Arial">проверяют - остался ли кто-нибудь в распоряжении 
бойцов в живых из вверенных им войск и очищают<span lang="en-us"> </span>
выбранные в прошлом ходе радио-кнопки.<span lang="en-us"><br>
<br>
</span>Смотрите полный код в файле <span lang="en-us">
<a href="BONUS/test_battle.html">test_battle.html</a>.&nbsp; <br>
<br>
</span>Коллектив Обучающего<span lang="en-us"> </span>Центра желает Вам успехов 
в разработке Ваших собственных браузерных игр<span lang="en-us">!<br>
<br>
<br>
<br>
</span><span lang="ru"><br>
<br>
<br>
&nbsp;</span></font></p>
<p align="justify"><font face="Arial" size="2">&nbsp;<span lang="ru"><br>
&nbsp;&nbsp; </span></font></p>
<font size="2" face="Arial">
        <p align="left">&nbsp;</font></td>
      <td width="27" height="356" background="Site/middle2.jpg">&nbsp;</td>
    </tr>
    <tr>
      <td width="740" height="38" background="Site/bottom.jpg" colspan="3">&nbsp;</td>
    </tr>
  </table>
  </center>
</div>

</body>

</html>